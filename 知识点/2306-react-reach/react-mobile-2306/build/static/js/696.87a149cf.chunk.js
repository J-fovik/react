"use strict";(self.webpackChunkreact_mobile_2306=self.webpackChunkreact_mobile_2306||[]).push([[696],{2662:function(e,t,n){n.d(t,{Aw:function(){return i},CS:function(){return o},UY:function(){return c}});var r=n(8845);function i(e){return(0,r.Z)({url:"/api/pro/detail/"+e.id,method:"get"})}function o(e){return(0,r.Z)({url:"/api/cart/add",method:"post",data:e})}function c(e){return(0,r.Z)({url:"/api/cart/list",method:"post",data:e})}},9179:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(2791),i=n(6045);var o=function(e){return r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),r.createElement("g",{id:"MoreOutline-MoreOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"MoreOutline-\u7f16\u7ec4"},r.createElement("rect",{id:"MoreOutline-\u77e9\u5f62",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),r.createElement("path",{d:"M12,21 C13.6568542,21 15,22.3431458 15,24 C15,25.6568542 13.6568542,27 12,27 C10.3431458,27 9,25.6568542 9,24 C9,22.3431458 10.3431458,21 12,21 Z M24,21 C25.6568542,21 27,22.3431458 27,24 C27,25.6568542 25.6568542,27 24,27 C22.3431458,27 21,25.6568542 21,24 C21,22.3431458 22.3431458,21 24,21 Z M36,21 C37.6568542,21 39,22.3431458 39,24 C39,25.6568542 37.6568542,27 36,27 C34.3431458,27 33,25.6568542 33,24 C33,22.3431458 34.3431458,21 36,21 Z",id:"MoreOutline-\u5f62\u72b6\u7ed3\u5408",fill:"currentColor",fillRule:"nonzero"}))))},c=n(4880),a=n(9434),s=n(184);function l(e){var t=(0,a.I0)(),n=(0,c.k6)(),r=e.isshowloginout?(0,s.jsx)("div",{onClick:function(){localStorage.removeItem("token"),t({type:"updateuser",payload:""}),n.push("/login")},children:"\u9000\u51fa"}):(0,s.jsx)("div",{style:{fontSize:24},children:(0,s.jsx)(i.T,{style:{"--gap":"16px"},children:(0,s.jsx)(o,{})})});return(0,s.jsx)(i.l2,{right:e.isshowright?r:null,onBack:function(){n.go(-1)},children:e.children})}},8845:function(e,t,n){var r=n(1243),i="";console.log("process.env.NODE_ENV","production"),i="http://47.94.148.165:3001";var o=r.Z.create({baseURL:i,timeout:5e3,headers:{"Content-Type":"application/json"}});o.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.token=t),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),t.Z=o},7696:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var r=n(4165),i=n(5861),o=n(2791),c=n(9179),a=n(6045),s=n(9434),l=n(4880),u=n(8845);function d(e){return(0,u.Z)({url:"/api/cart/remove",method:"post",data:e})}var h=n(2662),f=n(6689);function p(e){return{type:"updateCartList",payload:e}}function m(){var e=f.Z.getState().userid;return function(t){(0,h.UY)({userid:e}).then((function(e){e.data.data?t(p(e.data.data)):t(p([]))}))}}var g=n(184);function x(){var e=(0,s.v9)((function(e){return e.userid})),t=(0,s.I0)(),n=(0,s.v9)((function(e){return e.cartlist})),h=(0,o.useMemo)((function(){return n.length>0&&n.every((function(e){return e.flag}))}),[n]);(0,o.useEffect)((function(){t(m())}),[]);var f=(0,o.useMemo)((function(){return n.reduce((function(e,t){return t.flag?e+=t.originprice*t.num:e}),0)}),[n]),p=(0,l.k6)();return(0,g.jsxs)("div",{className:"cartbox",children:[(0,g.jsx)(c.Z,{children:"\u8d2d\u7269\u8f66(".concat(n.length,")")}),n.length>0?(0,g.jsx)(a.aV,{children:n.map((function(e){return(0,g.jsx)(a.Y,{rightActions:[{key:"delete",text:"\u5220\u9664",color:"danger",onClick:function(){var n=(0,i.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:d({cartid:e.cartid}).then((function(e){t(m())}));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}],children:(0,g.jsx)(a.aV.Item,{prefix:(0,g.jsxs)(a.T,{children:[(0,g.jsx)("div",{onClick:function(e){return e.stopPropagation()},children:(0,g.jsx)(a.XZ,{checked:e.flag,onChange:function(n){var r;(r={cartid:e.cartid,flag:n},(0,u.Z)({url:"/api/cart/selectone",method:"post",data:r})).then((function(e){t(m())}))}})}),(0,g.jsx)(a.Ee,{src:e.img1,style:{borderRadius:20},fit:"cover",width:40,height:40})]}),description:(0,g.jsxs)(a.T,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsxs)("span",{children:["$",e.originprice.toFixed(2)]}),(0,g.jsx)(a.vF,{value:e.num,onChange:function(n){var r;(console.log(n),0!=n)?(r={cartid:e.cartid,num:n},(0,u.Z)({url:"/api/cart/updatenum",method:"post",data:r})).then((function(e){t(m())})):d({cartid:e.cartid}).then((function(e){t(m())}))}})]}),children:(0,g.jsx)(a.mH,{className:"proname",direction:"end",rows:2,content:e.proname})})},e.cartid)}))}):(0,g.jsx)(a.HY,{style:{padding:"64px 0"},imageStyle:{width:128},description:(0,g.jsxs)(a.T,{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,g.jsx)("h3",{children:"\u6682\u65e0\u6570\u636e"}),(0,g.jsx)(a.zx,{style:{marginTop:"10px"},size:"small",color:"danger",onClick:function(){p.push("/home")},children:"\u53bb\u8d2d\u7269"})]})}),(0,g.jsxs)("div",{className:"totalbar",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)(a.XZ,{checked:h,onChange:function(n){var r;(r={userid:e,type:n},(0,u.Z)({url:"/api/cart/selectall",method:"post",data:r})).then((function(e){t(m())}))}}),"\u5168\u9009"]}),(0,g.jsxs)("p",{children:["\u603b\u4ef7:",f.toFixed(2),"\u5143"]}),(0,g.jsx)(a.zx,{type:"primary",color:"danger",children:"\u5408\u8ba1"})]})]})}}}]);
//# sourceMappingURL=696.87a149cf.chunk.js.map